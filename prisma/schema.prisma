generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/.prisma/client"
}

datasource db {
  provider = "postgresql"
}

enum ModelType {
  TEXT
  IMAGE
  VIDEO
  AUDIO
}

model AiModel {
  id          Int       @id @default(autoincrement())
  modelId     String    @unique @map("model_id")
  type        ModelType
  name        String
  description String?

  // Common fields
  tags       String[] @default([])
  popularity Int      @default(0)
  runCount   Int?     @map("run_count")

  // Text model specific (nullable for other types)
  contextLength Int? @map("context_length")

  // Image model specific
  supportedSizes      String[] @default([]) @map("supported_sizes")
  styles              String[] @default([])
  maxResolution       String?  @map("max_resolution")
  supportsInpainting  Boolean? @map("supports_inpainting")
  supportsOutpainting Boolean? @map("supports_outpainting")
  supportsControlNet  Boolean? @map("supports_controlnet")

  // Video model specific
  maxDuration          Int?     @map("max_duration")
  resolution           String[] @default([])
  fps                  Int?
  supportsAudio        Boolean? @map("supports_audio")
  supportsTextToVideo  Boolean? @map("supports_text_to_video")
  supportsImageToVideo Boolean? @map("supports_image_to_video")

  // Audio model specific
  audioType      String?  @map("audio_type")
  languages      String[] @default([])
  voiceCloning   Boolean? @map("voice_cloning")
  emotionControl Boolean? @map("emotion_control")
  realtime       Boolean?

  // Benchmarks (Text models)
  mmlu          Float?
  gpqa          Float?
  humanEval     Float? @map("human_eval")
  sweBench      Float? @map("swe_bench")
  liveCodeBench Float? @map("live_code_bench")
  math          Float?
  arenaElo      Int?   @map("arena_elo")

  // Quality scores (Image/Video/Audio)
  qualityScore Int? @map("quality_score")
  speedScore   Int? @map("speed_score")
  motionScore  Int? @map("motion_score")
  naturalness  Int?
  accuracy     Int?
  speed        Int?
  latency      Int?

  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime  @updatedAt @map("updated_at")
  deletedAt DateTime? @map("deleted_at")

  price AiPrice?

  @@map("ai_models")
}

model AiPrice {
  id      Int    @id @default(autoincrement())
  modelId Int    @unique @map("model_id")
  model   AiModel @relation(fields: [modelId], references: [id], onDelete: Cascade)

  // Text model pricing (per 1M tokens)
  inputPrice  Float? @map("input_price")
  outputPrice Float? @map("output_price")

  // Image model pricing
  pricePerImage Float? @map("price_per_image")

  // Video/Image model pricing (per second of generation)
  pricePerSecond Float? @map("price_per_second")

  // Audio model pricing
  pricePerMinute Float? @map("price_per_minute")
  pricePerChar   Float? @map("price_per_char")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("ai_prices")
}

model SyncLog {
  id           Int     @id @default(autoincrement())
  syncType     String  @map("sync_type")
  status       String
  modelCount   Int?    @map("model_count")
  errorMessage String? @map("error_message")
  duration     Int?

  createdAt DateTime @default(now()) @map("created_at")

  @@map("sync_logs")
}